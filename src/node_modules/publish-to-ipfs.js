module.exports = publish_to_ipfs

async function publish_to_ipfs () {
  return 'publish to ipfs'
}

const IPFS = require('ipfs-mini');
const ipfs = new IPFS({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' });

const button = document.createElement('button')
document.body.appendChild(button)
button.innerHTML = 'IPFS'
button.onclick = async () => {

  const x1 = await ipfs.add('hello world!').catch(console.log)
  console.log('x1', x1)
  // result null 'QmTp2hEo8eXRp6wg7jXv1BLCMh5a4F3B7buAUZNZUu772j'
  ipfs.cat('QmTp2hEo8eXRp6wg7jXv1BLCMh5a4F3B7buAUZNZUu772j', (err, x2) => {
    if (err) return console.error(err)
    console.log('x2', x2)
  })
  // result null 'hello world!'
  ipfs.addJSON({ somevalue: 2, name: 'Nick' }, async (err, x3) => {
    if (err) return console.error(err)
    console.log('x3', x3)
    const x4 = await ipfs.catJSON(x3).catch(console.error);
    console.log('x4', x4)
    // result null 'QmTp2hEo8eXRp6wg7jXv1BLCMh5a4F3B7buAUZNZUu772j'
    // result null { somevalue: 2, name: 'Nick' }
  })

}
